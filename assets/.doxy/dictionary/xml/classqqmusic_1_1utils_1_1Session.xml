<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.9.8" xml:lang="zh">
  <compounddef id="classqqmusic_1_1utils_1_1Session" kind="class" language="C++" prot="public">
    <compoundname>qqmusic::utils::Session</compoundname>
    <includes refid="session_8h" local="no">session.h</includes>
    <sectiondef kind="friend">
      <memberdef kind="friend" id="classqqmusic_1_1utils_1_1Session_1ac01f2e55f53ab751ca060dd59189c930" prot="private" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>class</type>
        <definition>friend class SessionManager</definition>
        <argsstring></argsstring>
        <name>SessionManager</name>
        <qualifiedname>qqmusic::utils::Session::SessionManager</qualifiedname>
        <param>
          <type><ref refid="classqqmusic_1_1utils_1_1SessionManager" kindref="compound">SessionManager</ref></type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="include/qqmusic/utils/session.h" line="41" column="18" bodyfile="include/qqmusic/utils/session.h" bodystart="41" bodyend="-1"/>
      </memberdef>
      <memberdef kind="friend" id="classqqmusic_1_1utils_1_1Session_1abe6f8a5172e0b9a193cf118c5c1f8f1e" prot="private" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>class</type>
        <definition>friend class SessionGuard</definition>
        <argsstring></argsstring>
        <name>SessionGuard</name>
        <qualifiedname>qqmusic::utils::Session::SessionGuard</qualifiedname>
        <param>
          <type><ref refid="classqqmusic_1_1utils_1_1SessionGuard" kindref="compound">SessionGuard</ref></type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="include/qqmusic/utils/session.h" line="42" column="18" bodyfile="include/qqmusic/utils/session.h" bodystart="42" bodyend="-1"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="private-attrib">
      <memberdef kind="variable" id="classqqmusic_1_1utils_1_1Session_1a3254225f77069e853bef3bcb9079b816" prot="private" static="no" mutable="no">
        <type>std::mutex &amp;</type>
        <definition>std::mutex&amp; qqmusic::utils::Session::lock</definition>
        <argsstring></argsstring>
        <name>lock</name>
        <qualifiedname>qqmusic::utils::Session::lock</qualifiedname>
        <briefdescription>
<para>对全局上下文负责的互斥锁引用 </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="include/qqmusic/utils/session.h" line="105" column="16" bodyfile="include/qqmusic/utils/session.h" bodystart="105" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="classqqmusic_1_1utils_1_1Session_1a7d1ef4dddd6b5f8e900420043aeb3c9d" prot="private" static="no" mutable="no">
        <type><ref refid="structqqmusic_1_1details_1_1NetworkContext" kindref="compound">qqmusic::details::NetworkContext</ref> &amp;</type>
        <definition>qqmusic::details::NetworkContext&amp; qqmusic::utils::Session::global_ctx</definition>
        <argsstring></argsstring>
        <name>global_ctx</name>
        <qualifiedname>qqmusic::utils::Session::global_ctx</qualifiedname>
        <briefdescription>
<para>全局上下文引用 </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="include/qqmusic/utils/session.h" line="110" column="38" bodyfile="include/qqmusic/utils/session.h" bodystart="110" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="classqqmusic_1_1utils_1_1Session_1a8dee2ca3cf11fcd7175272ce162cb022" prot="private" static="no" mutable="no">
        <type><ref refid="structqqmusic_1_1details_1_1NetworkContext" kindref="compound">qqmusic::details::NetworkContext</ref></type>
        <definition>qqmusic::details::NetworkContext qqmusic::utils::Session::local_ctx</definition>
        <argsstring></argsstring>
        <name>local_ctx</name>
        <qualifiedname>qqmusic::utils::Session::local_ctx</qualifiedname>
        <briefdescription>
<para>实例局部的上下文引用, 只允许用户直接对这份拷贝进行修改. </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="include/qqmusic/utils/session.h" line="115" column="38" bodyfile="include/qqmusic/utils/session.h" bodystart="115" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="classqqmusic_1_1utils_1_1Session_1a83b986a3a6a6796265efa649668ae4d1" prot="private" static="no" mutable="no">
        <type>std::shared_ptr&lt; asio::io_context &gt;</type>
        <definition>std::shared_ptr&lt;asio::io_context&gt; qqmusic::utils::Session::ioc</definition>
        <argsstring></argsstring>
        <name>ioc</name>
        <qualifiedname>qqmusic::utils::Session::ioc</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="include/qqmusic/utils/session.h" line="117" column="21" bodyfile="include/qqmusic/utils/session.h" bodystart="117" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="classqqmusic_1_1utils_1_1Session_1a99c57b319c8e1a3ecfa7103e74dcb250" prot="private" static="no" mutable="no">
        <type>std::shared_ptr&lt; asio::ssl::context &gt;</type>
        <definition>std::shared_ptr&lt;asio::ssl::context&gt; qqmusic::utils::Session::ssl_ctx</definition>
        <argsstring></argsstring>
        <name>ssl_ctx</name>
        <qualifiedname>qqmusic::utils::Session::ssl_ctx</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="include/qqmusic/utils/session.h" line="118" column="21" bodyfile="include/qqmusic/utils/session.h" bodystart="118" bodyend="-1"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="public-func">
      <memberdef kind="function" id="classqqmusic_1_1utils_1_1Session_1a3cd2fb2166ce8bf325efdf31499e2798" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>qqmusic::utils::Session::Session</definition>
        <argsstring>()=delete</argsstring>
        <name>Session</name>
        <qualifiedname>qqmusic::utils::Session::Session</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="include/qqmusic/utils/session.h" line="45" column="5"/>
      </memberdef>
      <memberdef kind="function" id="classqqmusic_1_1utils_1_1Session_1a8d8c7fecadaf38903c8272d10be84983" prot="public" static="no" const="no" explicit="no" inline="yes" virt="non-virtual">
        <type></type>
        <definition>qqmusic::utils::Session::Session</definition>
        <argsstring>(qqmusic::details::NetworkContext &amp;nc, std::shared_ptr&lt; asio::io_context &gt; ioc_ptr, std::shared_ptr&lt; asio::ssl::context &gt; ssl_ctx_ptr, std::mutex &amp;lock)</argsstring>
        <name>Session</name>
        <qualifiedname>qqmusic::utils::Session::Session</qualifiedname>
        <param>
          <type><ref refid="structqqmusic_1_1details_1_1NetworkContext" kindref="compound">qqmusic::details::NetworkContext</ref> &amp;</type>
          <declname>nc</declname>
        </param>
        <param>
          <type>std::shared_ptr&lt; asio::io_context &gt;</type>
          <declname>ioc_ptr</declname>
        </param>
        <param>
          <type>std::shared_ptr&lt; asio::ssl::context &gt;</type>
          <declname>ssl_ctx_ptr</declname>
        </param>
        <param>
          <type>std::mutex &amp;</type>
          <declname>lock</declname>
        </param>
        <briefdescription>
<para>构造函数, 正常情况下不应该使用 </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="include/qqmusic/utils/session.h" line="50" column="5" bodyfile="include/qqmusic/utils/session.h" bodystart="50" bodyend="58"/>
      </memberdef>
      <memberdef kind="function" id="classqqmusic_1_1utils_1_1Session_1a2325c96c481b9f49eaa7790cb528cc16" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="structqqmusic_1_1details_1_1NetworkContext" kindref="compound">qqmusic::details::NetworkContext</ref> &amp;</type>
        <definition>qqmusic::details::NetworkContext &amp; qqmusic::utils::Session::get_context_ref</definition>
        <argsstring>()</argsstring>
        <name>get_context_ref</name>
        <qualifiedname>qqmusic::utils::Session::get_context_ref</qualifiedname>
        <briefdescription>
<para>获取<computeroutput>session</computeroutput>实例的上下文引用 </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="include/qqmusic/utils/session.h" line="63" column="38" bodyfile="src/utils/session.cc" bodystart="65" bodyend="67"/>
        <referencedby refid="classqqmusic_1_1details_1_1Api_1a9a1fcc873609e03bd482c1d876e2b1ab" compoundref="api_8cc" startline="39" endline="129">qqmusic::details::Api::prepare_request</referencedby>
      </memberdef>
      <memberdef kind="function" id="classqqmusic_1_1utils_1_1Session_1a4ac0a3a73bb0c5f6efa9e99e785c9a66" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void qqmusic::utils::Session::sync_global</definition>
        <argsstring>()</argsstring>
        <name>sync_global</name>
        <qualifiedname>qqmusic::utils::Session::sync_global</qualifiedname>
        <briefdescription>
<para>将上下文的更改写回全局 </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="include/qqmusic/utils/session.h" line="68" column="10" bodyfile="src/utils/session.cc" bodystart="69" bodyend="72"/>
        <referencedby refid="classqqmusic_1_1details_1_1Api_1a9a1fcc873609e03bd482c1d876e2b1ab" compoundref="api_8cc" startline="39" endline="129">qqmusic::details::Api::prepare_request</referencedby>
      </memberdef>
      <memberdef kind="function" id="classqqmusic_1_1utils_1_1Session_1a46f92ff5aedd4f5fb62927a579d04b87" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void qqmusic::utils::Session::update_local</definition>
        <argsstring>()</argsstring>
        <name>update_local</name>
        <qualifiedname>qqmusic::utils::Session::update_local</qualifiedname>
        <briefdescription>
<para>将全局的更改同步到本实例 </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="include/qqmusic/utils/session.h" line="73" column="10" bodyfile="src/utils/session.cc" bodystart="74" bodyend="77"/>
      </memberdef>
      <memberdef kind="function" id="classqqmusic_1_1utils_1_1Session_1ae2c3db5c443eff967e7878ac53f360b2" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>qqmusic::Task&lt; qqmusic::Result&lt; HttpResponse &gt; &gt;</type>
        <definition>qqmusic::Task&lt; qqmusic::Result&lt; HttpResponse &gt; &gt; qqmusic::utils::Session::perform_request</definition>
        <argsstring>(boost::url_view url, http::request&lt; http::string_body &gt; &amp;req, bool auto_redirecting=true)</argsstring>
        <name>perform_request</name>
        <qualifiedname>qqmusic::utils::Session::perform_request</qualifiedname>
        <param>
          <type>boost::url_view</type>
          <declname>url</declname>
        </param>
        <param>
          <type>http::request&lt; http::string_body &gt; &amp;</type>
          <declname>req</declname>
        </param>
        <param>
          <type>bool</type>
          <declname>auto_redirecting</declname>
          <defval>true</defval>
        </param>
        <briefdescription>
<para>发送网络请求, 返回回复报文 </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>url</parametername>
</parameternamelist>
<parameterdescription>
<para>请求url </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>req</parametername>
</parameternamelist>
<parameterdescription>
<para>请求对象 </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>auto_redirecting</parametername>
</parameternamelist>
<parameterdescription>
<para>是否开启自动重定向, 默认<computeroutput>true</computeroutput></para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para><computeroutput>qqmusic::Task&lt;qqmusic::Result&lt;HttpResponse&gt;&gt;</computeroutput>, 返回原始报文</para>
</simplesect>
<simplesect kind="note"><para>异步函数, 返回<computeroutput>Task</computeroutput> </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="include/qqmusic/utils/session.h" line="86" column="19" bodyfile="src/utils/session.cc" bodystart="79" bodyend="106"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="private-func">
      <memberdef kind="function" id="classqqmusic_1_1utils_1_1Session_1ac45a1f32dae00dc23677561e59124b69" prot="private" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>qqmusic::Task&lt; qqmusic::Result&lt; HttpResponse &gt; &gt;</type>
        <definition>qqmusic::Task&lt; qqmusic::Result&lt; HttpResponse &gt; &gt; qqmusic::utils::Session::handle_http_request</definition>
        <argsstring>(boost::url_view url, http::request&lt; http::string_body &gt; &amp;req, bool auto_redirecting)</argsstring>
        <name>handle_http_request</name>
        <qualifiedname>qqmusic::utils::Session::handle_http_request</qualifiedname>
        <param>
          <type>boost::url_view</type>
          <declname>url</declname>
        </param>
        <param>
          <type>http::request&lt; http::string_body &gt; &amp;</type>
          <declname>req</declname>
        </param>
        <param>
          <type>bool</type>
          <declname>auto_redirecting</declname>
        </param>
        <briefdescription>
<para>处理http请求, 使用普通的<computeroutput>tcp_stream</computeroutput> </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="include/qqmusic/utils/session.h" line="93" column="19" bodyfile="src/utils/session.cc" bodystart="108" bodyend="235"/>
      </memberdef>
      <memberdef kind="function" id="classqqmusic_1_1utils_1_1Session_1a721356c5b8cefc52742dc07c6e35ab3f" prot="private" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>qqmusic::Task&lt; qqmusic::Result&lt; HttpResponse &gt; &gt;</type>
        <definition>qqmusic::Task&lt; qqmusic::Result&lt; HttpResponse &gt; &gt; qqmusic::utils::Session::handle_https_request</definition>
        <argsstring>(boost::url_view url, http::request&lt; http::string_body &gt; &amp;req, bool auto_redirecting)</argsstring>
        <name>handle_https_request</name>
        <qualifiedname>qqmusic::utils::Session::handle_https_request</qualifiedname>
        <param>
          <type>boost::url_view</type>
          <declname>url</declname>
        </param>
        <param>
          <type>http::request&lt; http::string_body &gt; &amp;</type>
          <declname>req</declname>
        </param>
        <param>
          <type>bool</type>
          <declname>auto_redirecting</declname>
        </param>
        <briefdescription>
<para>处理https请求, 使用<computeroutput>ssl_stream</computeroutput> </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="include/qqmusic/utils/session.h" line="99" column="19" bodyfile="src/utils/session.cc" bodystart="237" bodyend="396"/>
      </memberdef>
    </sectiondef>
    <briefdescription>
<para>上下文 </para>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <location file="include/qqmusic/utils/session.h" line="40" column="1" bodyfile="include/qqmusic/utils/session.h" bodystart="40" bodyend="119"/>
    <listofallmembers>
      <member refid="classqqmusic_1_1utils_1_1Session_1a2325c96c481b9f49eaa7790cb528cc16" prot="public" virt="non-virtual"><scope>qqmusic::utils::Session</scope><name>get_context_ref</name></member>
      <member refid="classqqmusic_1_1utils_1_1Session_1a7d1ef4dddd6b5f8e900420043aeb3c9d" prot="private" virt="non-virtual"><scope>qqmusic::utils::Session</scope><name>global_ctx</name></member>
      <member refid="classqqmusic_1_1utils_1_1Session_1ac45a1f32dae00dc23677561e59124b69" prot="private" virt="non-virtual"><scope>qqmusic::utils::Session</scope><name>handle_http_request</name></member>
      <member refid="classqqmusic_1_1utils_1_1Session_1a721356c5b8cefc52742dc07c6e35ab3f" prot="private" virt="non-virtual"><scope>qqmusic::utils::Session</scope><name>handle_https_request</name></member>
      <member refid="classqqmusic_1_1utils_1_1Session_1a83b986a3a6a6796265efa649668ae4d1" prot="private" virt="non-virtual"><scope>qqmusic::utils::Session</scope><name>ioc</name></member>
      <member refid="classqqmusic_1_1utils_1_1Session_1a8dee2ca3cf11fcd7175272ce162cb022" prot="private" virt="non-virtual"><scope>qqmusic::utils::Session</scope><name>local_ctx</name></member>
      <member refid="classqqmusic_1_1utils_1_1Session_1a3254225f77069e853bef3bcb9079b816" prot="private" virt="non-virtual"><scope>qqmusic::utils::Session</scope><name>lock</name></member>
      <member refid="classqqmusic_1_1utils_1_1Session_1ae2c3db5c443eff967e7878ac53f360b2" prot="public" virt="non-virtual"><scope>qqmusic::utils::Session</scope><name>perform_request</name></member>
      <member refid="classqqmusic_1_1utils_1_1Session_1a3cd2fb2166ce8bf325efdf31499e2798" prot="public" virt="non-virtual"><scope>qqmusic::utils::Session</scope><name>Session</name></member>
      <member refid="classqqmusic_1_1utils_1_1Session_1a8d8c7fecadaf38903c8272d10be84983" prot="public" virt="non-virtual"><scope>qqmusic::utils::Session</scope><name>Session</name></member>
      <member refid="classqqmusic_1_1utils_1_1Session_1abe6f8a5172e0b9a193cf118c5c1f8f1e" prot="private" virt="non-virtual"><scope>qqmusic::utils::Session</scope><name>SessionGuard</name></member>
      <member refid="classqqmusic_1_1utils_1_1Session_1ac01f2e55f53ab751ca060dd59189c930" prot="private" virt="non-virtual"><scope>qqmusic::utils::Session</scope><name>SessionManager</name></member>
      <member refid="classqqmusic_1_1utils_1_1Session_1a99c57b319c8e1a3ecfa7103e74dcb250" prot="private" virt="non-virtual"><scope>qqmusic::utils::Session</scope><name>ssl_ctx</name></member>
      <member refid="classqqmusic_1_1utils_1_1Session_1a4ac0a3a73bb0c5f6efa9e99e785c9a66" prot="public" virt="non-virtual"><scope>qqmusic::utils::Session</scope><name>sync_global</name></member>
      <member refid="classqqmusic_1_1utils_1_1Session_1a46f92ff5aedd4f5fb62927a579d04b87" prot="public" virt="non-virtual"><scope>qqmusic::utils::Session</scope><name>update_local</name></member>
    </listofallmembers>
  </compounddef>
</doxygen>
